Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
INFO:     Started server process [7996]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
тЪая╕П  Legacy HistoryManager - Switch to SQLite database
тЬЕ Database initialized successfully
тЬЕ Database initialized successfully
ЁЯЪА ISP PayBD AI Chat Backend started
ЁЯУК Database: SQLite with full analytics
ЁЯФЧ API endpoints:
   - POST /api/chat - Main chat endpoint
   - GET /api/history/conversations - List all conversations
   - GET /api/history/conversations/{id} - Get conversation messages
   - GET /api/history/users/{user_id}/conversations - User conversations
   - GET /api/history/statistics/daily - Daily statistics
   - GET /api/history/search - Search messages
   - DELETE /api/history/conversations/{id} - Delete conversation
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
Key 'title' is not supported in schema, ignoring
INFO:     Started server process [8753]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
тЪая╕П  Legacy HistoryManager - Switch to SQLite database
тЬЕ Database initialized successfully
тЬЕ Database initialized successfully
ЁЯЪА ISP PayBD AI Chat Backend started
ЁЯУК Database: SQLite with full analytics
ЁЯФЧ API endpoints:
   - POST /api/chat - Main chat endpoint
   - GET /api/history/conversations - List all conversations
   - GET /api/history/conversations/{id} - Get conversation messages
   - GET /api/history/users/{user_id}/conversations - User conversations
   - GET /api/history/statistics/daily - Daily statistics
   - GET /api/history/search - Search messages
   - DELETE /api/history/conversations/{id} - Delete conversation
INFO:     192.168.0.205:50491 - "GET /history HTTP/1.1" 200 OK
INFO:     192.168.0.205:50491 - "GET /api/history/health HTTP/1.1" 200 OK
INFO:     192.168.0.205:50492 - "GET /api/history/conversations?skip=0&limit=1000 HTTP/1.1" 200 OK
INFO:     192.168.0.205:50492 - "GET /api/history/statistics/daily?days=30 HTTP/1.1" 200 OK
INFO:     192.168.0.205:50492 - "GET /api/history/users/10854/messages?skip=0&limit=50 HTTP/1.1" 200 OK
INFO:     192.168.0.205:50614 - "GET /history HTTP/1.1" 200 OK
INFO:     192.168.0.205:50614 - "GET /api/history/health HTTP/1.1" 200 OK
INFO:     192.168.0.205:50615 - "GET /api/history/conversations?skip=0&limit=1000 HTTP/1.1" 200 OK
INFO:     192.168.0.205:50615 - "GET /api/history/statistics/daily?days=30 HTTP/1.1" 200 OK
INFO:     192.168.0.205:50615 - "GET /api/history/users/10854/messages?skip=0&limit=50 HTTP/1.1" 200 OK
INFO:     192.168.0.205:51068 - "GET /?user_id=10854&language=BN HTTP/1.1" 200 OK
/Users/bluebayit/Downloads/isppaybd-main/AI Chatbot/venv/lib/python3.11/site-packages/langchain_google_genai/chat_models.py:381: UserWarning: Convert_system_message_to_human will be deprecated!
  warnings.warn("Convert_system_message_to_human will be deprecated!")
/Users/bluebayit/Downloads/isppaybd-main/AI Chatbot/venv/lib/python3.11/site-packages/langchain_google_genai/chat_models.py:381: UserWarning: Convert_system_message_to_human will be deprecated!
  warnings.warn("Convert_system_message_to_human will be deprecated!")

[93mЁЯМН API Request received from client: check my internet status[0m
ЁЯТ╛ User message saved to database (ID: 29)

================================================================================
[93mЁЯУе INCOMING REQUEST (Yellow Log)[0m
================================================================================
ЁЯЖФ Conversation ID: user_10854_20251209_092850_9ace4315
ЁЯСд User ID: 10854
ЁЯМР Language: BN
ЁЯФТ Security Level: HIGH
ЁЯУВ Category: technical
[93mЁЯТм User Message: check my internet status[0m
ЁЯУЪ History Depth: 0 messages
================================================================================

тЬЕ Auto-Context: User ID 10854 will be used automatically

ЁЯМР Language: Bangla/Bengali selected

ЁЯдЦ AI Processing...



[1m> Entering new AgentExecutor chain...[0m
[32;1m[1;3m
Invoking: `check_internet_connectivity` with `{'user_id': '10854'}`


[0mЁЯФН Checking internet status for user ID: 10854
ЁЯФН Fetching user data from API: https://isppaybd.com/api/users/10854
тЬЕ User data fetched successfully for ID: 10854
тЬЕ Internet status checked - Issues: 0, Status: conn
[33;1m[1;3m{'status': 'success', 'user_name': 'SHOHAN', 'subscription_status': 'active', 'account_status': 'active', 'conn_status': 'conn', 'payment_pending': 640, 'will_expire': '2026-01-15 23:14:00', 'issues': ['No issues detected'], 'recommendations': ['Your internet connection appears to be working normally']}[0m[32;1m[1;3m```json
{
    "reply": "ржЖржкржирж╛рж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ рж╕ржХрзНрж░рж┐ржпрж╝ ржЖржЫрзЗ ржПржмржВ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред рждржмрзЗ, ржЖржкржирж╛рж░ рзмрзкрзж ржЯрж╛ржХрж╛ ржмрж┐рж▓ ржмржХрзЗржпрж╝рж╛ ржЖржЫрзЗред",
    "metadata": {
        "role": "assistant",
        "sender": "assistant",
        "store": true
    }
}
```[0m

[1m> Finished chain.[0m
[93mЁЯУЭ Raw AI Output: ```json
{
    "reply": "ржЖржкржирж╛рж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ рж╕ржХрзНрж░рж┐ржпрж╝ ржЖржЫрзЗ ржПржмржВ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред рждржмрзЗ, ржЖржкржирж╛рж░ рзмрзкрзж ржЯрж╛ржХрж╛ ржмрж┐рж▓ ржмржХрзЗржпрж╝рж╛ ржЖржЫрзЗред",
    "metadata": {
        "role": "assistant",
        "sender": "assistant",
        "store": true
    }
}
```[0m

================================================================================
[93mЁЯУд AI RESPONSE (Yellow Log)[0m
================================================================================
тЬЕ Status: Success
тП▒я╕П  Response Time: 4915.63ms
ЁЯУП Response Length: 97 characters
ЁЯФТ Security Level: HIGH
ЁЯУВ Category: technical
ЁЯТ╛ Store in DB: True
[93mЁЯТм Full Response: ржЖржкржирж╛рж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ рж╕ржХрзНрж░рж┐ржпрж╝ ржЖржЫрзЗ ржПржмржВ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред рждржмрзЗ, ржЖржкржирж╛рж░ рзмрзкрзж ржЯрж╛ржХрж╛ ржмрж┐рж▓ ржмржХрзЗржпрж╝рж╛ ржЖржЫрзЗред[0m
================================================================================

ЁЯТ╛ Assistant message saved to database (ID: 30)
[93mтЬЕ Response sent successfully to client: ржЖржкржирж╛рж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ рж╕ржХрзНрж░рж┐ржпрж╝ ржЖржЫрзЗ ржПржмржВ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред рждржмрзЗ, ржЖржкржирж╛рж░ рзмрзкрзж ржЯрж╛ржХрж╛ ржмрж┐рж▓ ржмржХрзЗржпрж╝рж╛ ржЖржЫрзЗред[0m

INFO:     192.168.0.205:51069 - "POST /api/chat HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8753]
